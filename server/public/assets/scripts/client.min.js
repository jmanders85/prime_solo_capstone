var app=angular.module("sheepsheadApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"HomeController"}).when("/leagues",{templateUrl:"views/leagues.html",controller:"LeaguesController"}).when("/createLeague",{templateUrl:"views/createLeague.html",controller:"CreateLeagueController"}).when("/events",{templateUrl:"views/events.html",controller:"EventsController"}).when("/createEvent",{templateUrl:"views/createEvent.html",controller:"CreateEventController"}).when("/users",{templateUrl:"views/users.html",controller:"UsersController"}).when("/createUser",{templateUrl:"views/createUser.html",controller:"CreateUserController"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController"}),b.html5Mode(!0)}]),app.controller("HomeController",["$scope","$http","SheepsheadService",function(a,b,c){c.getLeagues(),c.getEvents(),c.getUsers()}]),app.controller("LeaguesController",["$scope","$http","SheepsheadService",function(a,b,c){c.getLeagues(),a.leagues=c.data.leagues,a.league={},a.showLeagueDetail=function(c){b.get("/api/leagues/"+c).then(function(b){a.league=b.data[0]})},a.clearLeague=function(){a.league={}}}]),app.controller("CreateLeagueController",["$scope","$http","$location",function(a,b,c){a.newLeagueName="",a.postLeague=function(){b.post("/api/leagues",{name:a.newLeagueName}).then(function(a){200===a.status?c.path("/leagues"):console.log("ERROR")})}}]),app.controller("EventsController",["$scope","$http","SheepsheadService",function(a,b,c){c.getEvents(),a.events=c.data.events,a.event={},a.showEventDetail=function(c){b.get("/api/events/"+c).then(function(b){a.event=b.data[0]})},a.clearEvent=function(){a.hands=[],a.event={}}}]),app.controller("CreateEventController",["$scope","$http","$location",function(a,b,c){a.newEventName="",a.newEventDate=new Date,a.newEventLeagueID=1,a.newEventPlayerCount=3,a.newEventPlayers=[],a.range=function(a){return new Array(a)},a.postEvent=function(){var d=a.newEventPlayers.map(Number);b.post("/api/events",{name:a.newEventName,date:a.newEventDate,league_id:a.newEventLeagueID,players:d}).then(function(a){200===a.status?c.path("/events"):console.log("ERROR")})}}]),app.controller("UsersController",["$scope","$http","SheepsheadService",function(a,b,c){c.getUsers(),a.users=c.data.users,a.user={},a.showUserDetail=function(c){b.get("/api/users/"+c).then(function(b){a.user=b.data[0]})},a.clearUser=function(){a.user={}}}]),app.controller("CreateUserController",["$scope","$http","$location",function(a,b,c){a.newUserName="",a.postUser=function(){b.post("/api/users",{name:a.newUserName}).then(function(a){200===a.status?c.path("/users"):console.log("ERROR")})}}]),app.controller("LoginController",["$scope","$http","$location",function(a,b,c){a.username="",a.password="",a.loginFailed="Login Failed",a.showFailedMessage=!1,a.admin={},a.login=function(){a.showFailedMessage=!1,b.post("/login",{username:a.username,password:a.password}).then(function(b){b.data.username?a.admin=b.data:a.showFailedMessage=!0})},a.createLeague=function(){c.path("/createLeague")},a.createEvent=function(){c.path("/createEvent")},a.createUser=function(){c.path("/createUser")}}]),app.factory("SheepsheadService",["$http",function(a){var b={},c=function(){a.get("/api/leagues").then(function(a){b.leagues=a.data})},d=function(){a.get("/api/events").then(function(a){b.events=a.data})},e=function(){a.get("/api/users").then(function(a){b.users=a.data})};return{data:b,getLeagues:c,getEvents:d,getUsers:e}}]);